class CameraMan{c=0;paused=!0;interval=!1;frames=[];constructor(t){this.camera=t,this.result=document.createElement("a"),this.result.style.display="none",document.body.appendChild(this.result),window.addEventListener("keydown",this.handleKeyDown.bind(this),!1)}start(){this.paused=!1}pause(){this.paused=!0}stop(){this.paused=!0;try{this.createResultJSON()}catch(t){console.error(t)}finally{this.frames=[]}}update(){this.paused||this.frames.push({p:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},r:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z}})}createResultJSON(){let t=new Blob([JSON.stringify(this.frames)],{type:"application/json;charset=utf-8"});this.result.href=URL.createObjectURL(t),this.result.download="CM-track-"+new Date().toLocaleString()+".json",this.result.click()}loadTrack(t,s){fetch(t).then(t=>t.json()).then(t=>s(t))}playTrack(t,s=60,a=!0){this.interval=setInterval((function(){this.c<t.length?(this.camera.position.set(t[this.c].p.x,t[this.c].p.y,t[this.c].p.z),this.camera.rotation.set(t[this.c].r.x,t[this.c].r.y,t[this.c].r.z),this.c++):a?this.c=0:clearInterval(this.interval)}).bind(this),1e3/s)}pauseTrack(){clearInterval(this.interval)}stopTrack(){clearInterval(this.interval),this.c=0}handleKeyDown(t){switch(t.keyCode){case 49:this.start();break;case 50:this.pause();break;case 51:this.stop();break;case 52:console.log({ROTATION:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z},POSITION:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z}})}}}