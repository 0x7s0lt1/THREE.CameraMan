class CameraMan{constructor(t){this.camera=t,this.c=0,this.isPaused=!0,this.animIntervall=!1,this.animationArray=[],this.result=document.createElement("a"),this.result.style.display="none",document.body.appendChild(this.result),window.addEventListener("keydown",this.handleKeyDown.bind(this),!1)}start(){this.isPaused=!1,console.log("[CAMERA MAN] recording STARTED!")}pause(){this.isPaused=!0,console.log("[CAMERA MAN] recording PAUSED!")}stop(){this.isPaused=!0,console.log("[CAMERA MAN] recording STOPED");try{let t=new Blob([JSON.stringify(this.animationArray)],{type:"application/json;charset=utf-8"});this.result.href=URL.createObjectURL(t),this.result.download="CM-animation-"+new Date().toLocaleString()+".json",this.result.click(),console.log("[CAMERA MAN] recording is SAVED as",this.result.download)}catch(i){console.error(i)}finally{this.animationArray=[]}}update(){this.isPaused||this.animationArray.push({p:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},r:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z}})}loadTrack(t,i){fetch(t).then(t=>t.json()).then(a=>{i(a),console.log(t+" is LOADED!")})}playTrack(t,i){this.animIntervall=setInterval((function(){this.c<t.length?(this.camera.position.set(t[this.c].p.x,t[this.c].p.y,t[this.c].p.z),this.camera.rotation.set(t[this.c].r.x,t[this.c].r.y,t[this.c].r.z),this.c++):i?this.c=0:(clearInterval(this.animIntervall),console.log("[CAMERA MAN] animation FINISED!"))}).bind(this),10)}pauseTrack(){clearInterval(this.animIntervall),console.log("[CAMERA MAN] animation PAUSED!")}stopTrack(){clearInterval(this.animIntervall),this.c=0,console.log("[CAMERA MAN] animation STOPED!")}handleKeyDown(t){switch(t.keyCode){case 49:this.start();break;case 50:this.pause();break;case 51:this.stop();break;case 52:console.log({ROTATION:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z},POSITION:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z}})}}}